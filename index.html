<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>ComicDex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-900 text-white">

<!-- ================= NAVBAR ================= -->
<nav class="fixed w-full z-50 bg-black px-6 py-4 flex justify-between items-center">
  <h1 class="text-red-500 font-bold text-2xl">ComicDex</h1>

  <input id="searchInput"
    placeholder="Search comic..."
    class="hidden md:block bg-slate-800 px-4 py-2 rounded w-64">

  <button id="menuBtn" class="md:hidden text-2xl">☰</button>
</nav>

<div id="mobileMenu" class="hidden bg-black pt-20 px-4">
  <input id="searchMobile"
    placeholder="Search comic..."
    class="w-full bg-slate-800 px-4 py-2 rounded mb-4">
</div>

<!-- ================= HERO ================= -->
<section class="pt-28 pb-10 bg-gradient-to-r from-red-600 to-pink-600">
  <div class="max-w-7xl mx-auto px-6">
    <h2 class="text-4xl font-bold mb-2">Discover Comics & Manga</h2>
    <p>Read your favorite comics anytime, anywhere</p>
  </div>
</section>

<!-- ================= FILTER ================= -->
<section class="max-w-7xl mx-auto px-6 py-4 flex gap-3 flex-wrap">
  <button onclick="filterGenre('All')" class="genre-btn bg-red-500 px-4 py-1 rounded">All</button>
  <button onclick="filterGenre('Supernatural')" class="genre-btn bg-slate-700 px-4 py-1 rounded">Supernatural</button>
  <button onclick="filterGenre('Psychological')" class="genre-btn bg-slate-700 px-4 py-1 rounded">Psychological</button>
  <button onclick="filterGenre('Mystery')" class="genre-btn bg-slate-700 px-4 py-1 rounded">Mystery</button>
</section>

<!-- ================= HOME ================= -->
<section id="home" class="max-w-7xl mx-auto px-6">
  <div id="comicGrid"
    class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
  </div>

  <div id="pagination" class="flex justify-center mt-8 gap-2"></div>
</section>

<!-- ================= READER ================= -->
<section id="reader" class="hidden max-w-4xl mx-auto px-6 pt-24 pb-10">
  <button onclick="backHome()" class="mb-4 text-red-500">⬅ Back</button>
  <h2 id="readerTitle" class="text-2xl font-bold mb-6"></h2>
  <div id="pages" class="space-y-6"></div>
</section>

<!-- ================= SCRIPT ================= -->
<script>
// ================= DATA =================
const comics = [
  {
    id: 1,
    title: "Lorong Terakhir",
    genre: "Mystery",
    image: "LorongTerakhir.png"
  },
  {
    id: 2,
    title: "Kamar Nomor 0",
    genre: "Mystery",
    image: "KamarNomor0.png"
  },
  {
    id: 3,
    title: "Suara dari Dalam Lemari",
    genre: "Mystery",
    image: "SuaraDariDalamLemari.png"
  },
  {
    id: 4,
    title: "Tawa dari Dinding",
    genre: "Mystery",
    image: "TawaDariDinding.png"
  },
  {
    id: 5,
    title: "Panggilan yang Tidak Pernah Aku Jawab",
    genre: "Mystery",
    image: "images/naruto.jpg"
  },
  {
    id: 6,
    title: "Wajah di Cermin Bukan Milikku",
    genre: "Supernatural",
    image: "images/onepiece.jpg"
  },
  {
    id: 7,
    title: "Aku Melihat Diriku Sendiri",
    genre: "Psychological",
    image: "images/demonslayer.jpg"
  },
  {
    id: 8,
    title: "Video yang Tidak Pernah Kuunggah",
    genre: "Mystery",
    image: "images/naruto.jpg"
  },
  {
    id: 9,
    title: "Lemari yang Mengintip Balik",
    genre: "Mystery",
    image: "images/naruto.jpg"
  },
  {
    id: 10,
    title: "Cermin yang Tidak Memantulkan Aku",
    genre: "Psychological",
    image: "images/naruto.jpg"
  },
  {
    id: 11,
    title: "Ada yang Tinggal di Balik Pohon",
    genre: "Supernatural",
    image: "images/onepiece.jpg"
  },
  {
    id: 12,
    title: "Bayangan di Dalam Air",
    genre: "Supernatural",
    image: "images/demonslayer.jpg"
  },
  {
    id: 13,
    title: "Bayangan yang Tidak Punya Tubuh",
    genre: "Supernatural",
    image: "images/naruto.jpg"
  },
  {
    id: 14,
    title: "Taman Bermain Jam 3 Pagi",
    genre: "Mystery",
    image: "images/naruto.jpg"
  },
  {
    id: 15,
    title: "Dapur yang Selalu Menyala",
    genre: "Mystery",
    image: "images/naruto.jpg"
  }
];


let filtered = [...comics];
let page = 1;
const perPage = 10;

// ================= RENDER =================
function render() {
  const grid = document.getElementById("comicGrid");
  grid.innerHTML = "";

  const start = (page - 1) * perPage;
  filtered.slice(start, start + perPage).forEach(c => {
    const rating = localStorage.getItem("rating_" + c.id) || 0;

    grid.innerHTML += `
      <div class="bg-slate-800 rounded-lg overflow-hidden cursor-pointer
      hover:-translate-y-2 hover:shadow-2xl transition"
      data-title="${c.title.toLowerCase()}"
      onclick="openComic(${c.id})">

        <img src="${c.image}" class="h-60 w-full object-cover">

        <div class="p-3">
          <h3 class="font-semibold">${c.title}</h3>
          <p class="text-sm text-slate-400">${c.genre}</p>

          <div class="flex mt-2" onclick="event.stopPropagation()">
            ${[1,2,3,4,5].map(s => `
              <span onclick="rate(${c.id},${s})"
                class="cursor-pointer text-xl
                ${s <= rating ? 'text-yellow-400' : 'text-slate-500'}">★</span>
            `).join("")}
          </div>
        </div>
      </div>
    `;
  });

  renderPagination();
}

// ================= PAGINATION =================
function renderPagination() {
  const total = Math.ceil(filtered.length / perPage);
  const p = document.getElementById("pagination");
  p.innerHTML = "";

  for (let i = 1; i <= total; i++) {
    p.innerHTML += `
      <button onclick="gotoPage(${i})"
      class="px-3 py-1 rounded ${i===page?'bg-red-500':'bg-slate-700'}">
      ${i}</button>
    `;
  }
}

function gotoPage(n) {
  page = n;
  render();
}

// ================= SEARCH =================
function doSearch(value) {
  filtered = comics.filter(c =>
    c.title.toLowerCase().includes(value.toLowerCase())
  );
  page = 1;
  render();
}

searchInput.oninput = e => doSearch(e.target.value);
searchMobile.oninput = e => doSearch(e.target.value);

// ================= GENRE =================
function filterGenre(g) {
  filtered = g === "All" ? comics : comics.filter(c => c.genre === g);
  page = 1;
  render();
}

// ================= RATING =================
function rate(id, value) {
  localStorage.setItem("rating_" + id, value);
  render();
}

// ================= READER =================
function openComic(id) {
  document.getElementById("home").classList.add("hidden");
  document.getElementById("reader").classList.remove("hidden");

  document.getElementById("readerTitle").innerText = "Comic " + id;
  const pages = document.getElementById("pages");
  pages.innerHTML = "";

  for (let i = 1; i <= 10; i++) {
    pages.innerHTML += `
      <img src="https://picsum.photos/800/1200?random=${id}${i}"
      class="rounded w-full">
    `;
  }
}

function backHome() {
  document.getElementById("reader").classList.add("hidden");
  document.getElementById("home").classList.remove("hidden");
}

// ================= MOBILE MENU =================
menuBtn.onclick = () => mobileMenu.classList.toggle("hidden");

render();
</script>

</body>
</html>
